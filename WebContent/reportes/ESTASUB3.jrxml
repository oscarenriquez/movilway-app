<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ESTASUB3" pageWidth="792" pageHeight="612" orientation="Landscape" columnWidth="792" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="p_tcncon" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
  T1.TCNCON,
  T1.FCTFAC||'-'||T1.FCLFAC||'-'||T1.FCNFAC DOC_CARGO,
  T1.FCSTSF ESTATUS_FNC,
  TO_DATE(T1.FCAZFA*10000+T1.FCMEFA*100+T1.FCDIFA,'YYYYMMDD') FECHA_FNC,
  TO_DATE(T1.FCAZVF*10000+T1.FCMEVF*100+T1.FCDIVF,'YYYYMMDD') FECHA_VENC_FNC,
  T1.FCTOTF TOTAL_FNC_Q,
  NULL FNC_CREDITO
FROM
  STCDATEMP.F4PRFHED T1
WHERE
  T1.FCSTSF IN ('AUT','DIF') AND
  NOT EXISTS ( SELECT 1 FROM STCDATEMP.F4CTDECR WHERE CTCOTI=T1.FCTFAC AND CTCOLE=T1.FCLFAC AND CTCONU=T1.FCNFAC ) AND
  T1.TCNCON=$P{p_tcncon}
UNION ALL
SELECT
  T1.TCNCON,
  T1.FCTFAC||'-'||T1.FCLFAC||'-'||T1.FCNFAC DOC_CARGO,
  T1.FCSTSF ESTATUS_FNC,
  TO_DATE(T1.FCAZFA*10000+T1.FCMEFA*100+T1.FCDIFA,'YYYYMMDD') FECHA_FNC,
  TO_DATE(T1.FCAZVF*10000+T1.FCMEVF*100+T1.FCDIVF,'YYYYMMDD') FECHA_VENC_FNC,
  T1.FCTOTF TOTAL_CUOTA_Q,
  T3.CTCRTI||'-'||T3.CTCRLE||'-'||T3.CTCRNU FNC_CREDITO
FROM
  STCDATEMP.F4PRFHED T1,
  STCDATEMP.F4CTDECR T3
WHERE
  T3.CTCOTI(+)=T1.FCTFAC AND
  T3.CTCOLE(+)=T1.FCLFAC AND
  T3.CTCONU(+)=T1.FCNFAC AND
  T1.FCSTSF='AUT' AND
  EXISTS ( SELECT 1 FROM STCDATEMP.F4CTDECR WHERE CTCOTI=T1.FCTFAC AND CTCOLE=T1.FCLFAC AND CTCONU=T1.FCNFAC ) AND
  T1.TCNCON=$P{p_tcncon}]]>
	</queryString>
	<field name="TCNCON" class="java.math.BigDecimal"/>
	<field name="DOC_CARGO" class="java.lang.String"/>
	<field name="ESTATUS_FNC" class="java.lang.String"/>
	<field name="FECHA_FNC" class="java.sql.Timestamp"/>
	<field name="FECHA_VENC_FNC" class="java.sql.Timestamp"/>
	<field name="TOTAL_FNC_Q" class="java.math.BigDecimal"/>
	<field name="FNC_CREDITO" class="java.lang.String"/>
	<variable name="TOTAL_FNC_Q_1" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{TOTAL_FNC_Q}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="16" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="724" height="16"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[DEUDA PENDIENTE DE FACTURAR]]></text>
			</staticText>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="25" splitType="Stretch">
			<rectangle radius="10">
				<reportElement mode="Opaque" x="0" y="0" width="724" height="24" backcolor="#E6E6E6"/>
			</rectangle>
			<staticText>
				<reportElement x="130" y="5" width="60" height="13"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Estatus Doc.]]></text>
			</staticText>
			<staticText>
				<reportElement x="235" y="5" width="57" height="13"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Fec.Cargo]]></text>
			</staticText>
			<staticText>
				<reportElement x="12" y="5" width="69" height="13"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Doc. Cargo]]></text>
			</staticText>
			<staticText>
				<reportElement x="349" y="5" width="57" height="13"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Fec.Venc.]]></text>
			</staticText>
			<staticText>
				<reportElement x="468" y="5" width="100" height="13"/>
				<box rightPadding="5"/>
				<textElement textAlignment="Right">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Tot.Cargos]]></text>
			</staticText>
			<staticText>
				<reportElement x="624" y="5" width="100" height="13"/>
				<box rightPadding="5"/>
				<textElement textAlignment="Center">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Doc.Credito]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField>
				<reportElement x="12" y="0" width="69" height="13"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{DOC_CARGO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="130" y="0" width="60" height="13"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ESTATUS_FNC}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="235" y="0" width="57" height="13"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$F{FECHA_FNC}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement x="349" y="0" width="57" height="13"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.sql.Timestamp"><![CDATA[$F{FECHA_VENC_FNC}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="468" y="0" width="100" height="13"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{TOTAL_FNC_Q}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="624" y="0" width="100" height="13"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{FNC_CREDITO}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="13" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="468" height="13"/>
				<box rightPadding="5">
					<topPen lineWidth="0.75"/>
				</box>
				<textElement>
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[TOTAL DE CARGOS PENDIENTES DE FACTURAR ]]></text>
			</staticText>
			<textField pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement x="468" y="0" width="100" height="13"/>
				<box>
					<topPen lineWidth="0.75"/>
				</box>
				<textElement textAlignment="Right">
					<font isBold="true"/>
				</textElement>
				<textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{TOTAL_FNC_Q_1}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
